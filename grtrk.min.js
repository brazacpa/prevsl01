function getAllUrlParams(){const t={},e=location.search.substring(1);return e?(e.split("&").forEach((e=>{const[n,r]=e.split("=").map(decodeURIComponent);n&&(t[n]=r||null)})),t):t}function getRtkClickId(){const t=sessionStorage.getItem("rtkclickid");if(t)return t;const e=localStorage.getItem("rtkclickid");if(e)return e;const n=document.cookie.match(/(^|;\s*)(rtkclickid)=([^;]+)/i);return n?decodeURIComponent(n[3]):null}function updateAllLinksWithParams(t){document.querySelectorAll("a").forEach((e=>{try{if(!e.href||e.href.startsWith("#")||e.href.startsWith("javascript:"))return;const n=new URL(e.href);Object.entries(t).forEach((([t,e])=>{e&&n.searchParams.set(t,e)})),e.href=n.toString()}catch(t){}}))}function getParam(t){return new URLSearchParams(window.location.search).get(t)}function parseUrlLand(){const t="localhost"===window.location.hostname,e=window.location.pathname.split("/").filter((t=>t.length>0));if(e.length<3)return null;const n=t?e[4]:e[0],r=t?e[5]:e[1],a=t?e[6]:e[2],[c,o]=(a||"").split("-");return n&&r&&c&&o?{product_slug:n,adv_type:r,adv_id:c,adv_code:o}:null}document.addEventListener("DOMContentLoaded",(()=>{const t=new URL(window.location),e=new URLSearchParams(t.search),n=getAllUrlParams();updateAllLinksWithParams(n);const r=window.location.hostname,a="track."+r.replace(/^www\./,"");document.querySelectorAll('a[href*="krcp5.ttrk.io"]').forEach((t=>{const e=t.getAttribute("href");if(e){const n=e.replace(/krcp5\.ttrk\.io/gi,a);t.setAttribute("href",n)}}));const c=parseUrlLand();if(!c)return;const o=getParam("cmpid")||getParam("rtkcmpid")||localStorage.getItem("cmpid"+c.adv_id);if(!o||!/^[a-z0-9]{24,36}$/i.test(o))return;let i;localStorage.setItem("cmpid"+c.adv_id,o),i="pre-vsl"==c.adv_type?"uniprelpclick.js":"unilpclick.js";const l=document.createElement("script");if(l.src=`https://${a}/${i}?attribution=lastpaid&cookiedomain=${r}&cookieduration=30&defaultcampaignid=${o}&regviewonce=false`,l.async=!0,window.addEventListener("DOMContentLoaded",(function(){document.body.appendChild(l)})),!e.has("rtkclickid")&&!localStorage.getItem("clickid"+c.adv_id)){let t=0;const e=30,r=setInterval((()=>{const a=getRtkClickId();a&&(updateAllLinksWithParams({...n,rtkclickid:a}),clearInterval(r)),++t>=e&&clearInterval(r)}),100)}}));